## Controller-Glance ##

## controller ##

#https://docs.openstack.org/glance/latest/install/install-rdo.html
#first, create a db named glance
MariaDB [(none)]> CREATE DATABASE glance;
MariaDB [(none)]> SHOW DATABASES;
+--------------------+
| Database           |
+--------------------+
| glance             |
| information_schema |
| keystone           |
| mysql              |
| performance_schema |
+--------------------+

#grant proper access to the glance db
MariaDB [(none)]> GRANT ALL PRIVILEGES ON glance.* TO 'glance'@'localhost' \
  IDENTIFIED BY 'YOUR_GLANCE_DBPASS';
MariaDB [(none)]> GRANT ALL PRIVILEGES ON glance.* TO 'glance'@'%' \
  IDENTIFIED BY 'YOUR_GLANCE_DBPASS';
  
#flush privileges to apply changes and exit
MariaDB [(none)]> flush privileges;
MariaDB [(none)]> exit

#glance user create for openstack
[ostack@controller ~]$ openstack user create --domain default --password-prompt glance
[ostack@controller ~]$ openstack project create --domain default \
>   --description "Service Project" service
[ostack@controller ~]$ openstack role add --project service --user glance admin

#create the glance service entity
[ostack@controller ~]$ openstack service create --name glance \
>   --description "ust OpenStack Image" image

#create image service API endpoints for public, internal and admin
[ostack@controller ~]$ openstack endpoint create --region RegionOne \
>   image public http://controller:9292
[ostack@controller ~]$ openstack endpoint create --region RegionOne \
>   image internal http://controller:9292
[ostack@controller ~]$ openstack endpoint create --region RegionOne \
>   image admin http://controller:9292
